{"version":3,"file":"extension.js","mappings":"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","sources":[".././src/panels/TraceDetailPanel.ts",".././src/views/TreeProvider.ts",".././src/panels/ConnectionFormPanel.ts",".././src/core/ConnectionStorage.ts",".././src/views/TreeItems.ts",".././src/extension.ts","../external commonjs \"vscode\"",".././src/commands/trace.ts",".././src/core/LangfuseClient.ts",".././src/commands/filter.ts",".././src/commands/connection.ts",".././src/core/ConnectionManager.ts","../webpack/bootstrap","../webpack/startup"],"sourcesContent":["import * as vscode from 'vscode';\nimport { Trace, Observation, TraceWithObservations } from '../types';\nimport { ConnectionManager } from '../core/ConnectionManager';\n\nexport class TraceDetailPanel {\n  private static panels = new Map<string, TraceDetailPanel>();\n  private readonly panel: vscode.WebviewPanel;\n  private disposables: vscode.Disposable[] = [];\n  private trace: TraceWithObservations | null = null;\n\n  private constructor(\n    panel: vscode.WebviewPanel,\n    private connectionId: string,\n    private traceId: string,\n    private connectionManager: ConnectionManager\n  ) {\n    this.panel = panel;\n    this.panel.webview.html = this.getLoadingHtml();\n    this.panel.onDidDispose(() => this.dispose(), null, this.disposables);\n    this.panel.webview.onDidReceiveMessage(\n      message => this.handleMessage(message),\n      null,\n      this.disposables\n    );\n    this.loadTrace();\n  }\n\n  static show(\n    connectionId: string,\n    trace: Trace,\n    connectionManager: ConnectionManager\n  ): void {\n    const key = `${connectionId}:${trace.id}`;\n    const existing = this.panels.get(key);\n    if (existing) {\n      existing.panel.reveal();\n      return;\n    }\n\n    const panel = vscode.window.createWebviewPanel(\n      'langfuseTraceDetail',\n      `Trace: ${trace.name || trace.id.slice(0, 8)}`,\n      vscode.ViewColumn.One,\n      { enableScripts: true, retainContextWhenHidden: true }\n    );\n\n    const detailPanel = new TraceDetailPanel(panel, connectionId, trace.id, connectionManager);\n    this.panels.set(key, detailPanel);\n  }\n\n  private async loadTrace(): Promise<void> {\n    const client = this.connectionManager.getClient(this.connectionId);\n    if (!client) {\n      this.panel.webview.html = this.getErrorHtml('Not connected');\n      return;\n    }\n\n    try {\n      this.trace = await client.getTrace(this.traceId);\n      this.panel.webview.html = this.getHtml();\n    } catch (error) {\n      this.panel.webview.html = this.getErrorHtml(\n        error instanceof Error ? error.message : 'Failed to load trace'\n      );\n    }\n  }\n\n  private handleMessage(message: { command: string; [key: string]: unknown }): void {\n    switch (message.command) {\n      case 'openInBrowser':\n        this.openInBrowser();\n        break;\n      case 'refresh':\n        this.loadTrace();\n        break;\n    }\n  }\n\n  private openInBrowser(): void {\n    const config = this.connectionManager.getConnections().find((c) => c.id === this.connectionId);\n    if (config && this.trace) {\n      const projectId = this.trace.projectId || 'default';\n      const url = `${config.url}/project/${projectId}/traces/${this.trace.id}`;\n      vscode.env.openExternal(vscode.Uri.parse(url));\n    }\n  }\n\n  private getLoadingHtml(): string {\n    return `<!DOCTYPE html>\n<html><head><style>\nbody { display: flex; justify-content: center; align-items: center; height: 100vh; \n  font-family: var(--vscode-font-family); color: var(--vscode-foreground); }\n</style></head><body>Loading trace...</body></html>`;\n  }\n\n  private getErrorHtml(message: string): string {\n    return `<!DOCTYPE html>\n<html><head><style>\nbody { display: flex; justify-content: center; align-items: center; height: 100vh;\n  font-family: var(--vscode-font-family); color: var(--vscode-errorForeground); }\n</style></head><body>Error: ${message}</body></html>`;\n  }\n\n  private getHtml(): string {\n    if (!this.trace) {\n      return this.getErrorHtml('No trace data');\n    }\n\n    const trace = this.trace;\n    const observations = trace.observations || [];\n\n    const traceStart = new Date(trace.timestamp).getTime();\n    const traceEnd = observations.length > 0 \n      ? Math.max(...observations.map(o => new Date(o.endTime || o.startTime).getTime()))\n      : traceStart;\n    const traceDuration = ((traceEnd - traceStart) / 1000).toFixed(2);\n\n    return `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <style>\n    * { box-sizing: border-box; margin: 0; padding: 0; }\n    body {\n      font-family: var(--vscode-font-family);\n      font-size: 13px;\n      color: var(--vscode-foreground);\n      background: var(--vscode-editor-background);\n      height: 100vh;\n      overflow: hidden;\n    }\n    .container { display: flex; height: 100vh; }\n    .sidebar {\n      width: 320px;\n      min-width: 280px;\n      border-right: 1px solid var(--vscode-panel-border);\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n    }\n    .sidebar-header {\n      padding: 12px;\n      border-bottom: 1px solid var(--vscode-panel-border);\n      flex-shrink: 0;\n    }\n    .sidebar-title { font-weight: 600; font-size: 14px; margin-bottom: 4px; }\n    .sidebar-meta { font-size: 11px; color: var(--vscode-descriptionForeground); }\n    .tree { flex: 1; overflow-y: auto; padding: 8px 0; }\n    .tree-item { cursor: pointer; user-select: none; }\n    .tree-item-header {\n      display: flex;\n      align-items: center;\n      padding: 6px 12px;\n      gap: 6px;\n    }\n    .tree-item-header:hover { background: var(--vscode-list-hoverBackground); }\n    .tree-item.selected > .tree-item-header {\n      background: var(--vscode-list-activeSelectionBackground);\n      color: var(--vscode-list-activeSelectionForeground);\n    }\n    .tree-chevron {\n      width: 16px;\n      text-align: center;\n      font-size: 10px;\n      color: var(--vscode-descriptionForeground);\n      flex-shrink: 0;\n      transition: transform 0.15s;\n    }\n    .tree-icon {\n      width: 18px;\n      height: 18px;\n      border-radius: 3px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 10px;\n      flex-shrink: 0;\n    }\n    .tree-icon.trace { background: #6366f1; color: white; }\n    .tree-icon.span { background: #22c55e; color: white; }\n    .tree-icon.generation { background: #3b82f6; color: white; }\n    .tree-icon.event { background: #f59e0b; color: white; }\n    .tree-name { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }\n    .tree-badge {\n      padding: 1px 5px;\n      border-radius: 3px;\n      font-size: 10px;\n      font-weight: 600;\n      flex-shrink: 0;\n    }\n    .tree-badge.error { background: #ef4444; color: white; }\n    .tree-badge.warning { background: #f59e0b; color: white; }\n    .tree-duration { font-size: 11px; color: var(--vscode-descriptionForeground); flex-shrink: 0; }\n    .tree-children { display: none; }\n    .tree-item.expanded > .tree-children { display: block; }\n    .tree-item.expanded > .tree-item-header > .tree-chevron { transform: rotate(90deg); }\n    .main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }\n    .main-header {\n      padding: 12px 16px;\n      border-bottom: 1px solid var(--vscode-panel-border);\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-start;\n      flex-shrink: 0;\n    }\n    .main-title { font-size: 15px; font-weight: 600; margin-bottom: 4px; }\n    .main-subtitle { font-size: 11px; color: var(--vscode-descriptionForeground); }\n    .badges { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }\n    .badge {\n      padding: 3px 8px;\n      border-radius: 4px;\n      font-size: 11px;\n      background: var(--vscode-badge-background);\n      color: var(--vscode-badge-foreground);\n    }\n    .actions { display: flex; gap: 8px; }\n    .btn {\n      padding: 5px 10px;\n      border: none;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 12px;\n      background: var(--vscode-button-secondaryBackground);\n      color: var(--vscode-button-secondaryForeground);\n    }\n    .btn:hover { background: var(--vscode-button-secondaryHoverBackground); }\n    .btn-primary { background: var(--vscode-button-background); color: var(--vscode-button-foreground); }\n    .btn-primary:hover { background: var(--vscode-button-hoverBackground); }\n    .main-content { flex: 1; overflow-y: auto; padding: 16px; }\n    \n    .section { margin-bottom: 16px; border: 1px solid var(--vscode-panel-border); border-radius: 6px; overflow: hidden; }\n    .section-header {\n      font-weight: 600;\n      font-size: 13px;\n      padding: 10px 12px;\n      background: var(--vscode-sideBarSectionHeader-background);\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      user-select: none;\n    }\n    .section-header:hover { background: var(--vscode-list-hoverBackground); }\n    .section-chevron {\n      font-size: 10px;\n      transition: transform 0.15s;\n      color: var(--vscode-descriptionForeground);\n    }\n    .section.collapsed .section-chevron { transform: rotate(-90deg); }\n    .section.collapsed .section-content { display: none; }\n    .section-content {\n      padding: 12px;\n      background: var(--vscode-textCodeBlock-background);\n    }\n    .empty { color: var(--vscode-descriptionForeground); font-style: italic; }\n    \n    .model-info {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n      gap: 12px;\n      margin-bottom: 16px;\n    }\n    .model-info-item { background: var(--vscode-textCodeBlock-background); padding: 10px; border-radius: 6px; }\n    .model-info-label { font-size: 10px; color: var(--vscode-descriptionForeground); text-transform: uppercase; margin-bottom: 4px; }\n    .model-info-value { font-weight: 500; }\n    \n    .depth-0 { padding-left: 12px; }\n    .depth-1 { padding-left: 32px; }\n    .depth-2 { padding-left: 52px; }\n    .depth-3 { padding-left: 72px; }\n    .depth-4 { padding-left: 92px; }\n    .depth-5 { padding-left: 112px; }\n    \n    .json-tree { font-family: var(--vscode-editor-font-family); font-size: 12px; line-height: 1.6; }\n    .json-node { }\n    .json-key { color: #9cdcfe; }\n    .json-string { color: #ce9178; }\n    .json-number { color: #b5cea8; }\n    .json-boolean { color: #569cd6; }\n    .json-null { color: #569cd6; }\n    .json-bracket { color: var(--vscode-descriptionForeground); }\n    .json-toggle {\n      cursor: pointer;\n      user-select: none;\n      display: inline-block;\n      width: 14px;\n      text-align: center;\n      color: var(--vscode-descriptionForeground);\n      font-size: 10px;\n    }\n    .json-toggle:hover { color: var(--vscode-foreground); }\n    .json-collapsed > .json-children { display: none; }\n    .json-collapsed > .json-toggle { transform: rotate(-90deg); display: inline-block; }\n    .json-ellipsis { color: var(--vscode-descriptionForeground); cursor: pointer; }\n    .json-children { margin-left: 16px; }\n    .json-item-count { color: var(--vscode-descriptionForeground); font-size: 11px; margin-left: 4px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"sidebar\">\n      <div class=\"sidebar-header\">\n        <div class=\"sidebar-title\">${this.escapeHtml(trace.name || 'Unnamed Trace')}</div>\n        <div class=\"sidebar-meta\">${observations.length} observations · ${traceDuration}s</div>\n      </div>\n      <div class=\"tree\">\n        ${this.renderTreeItem('trace', trace.id, trace.name || 'Trace', traceDuration + 's', null, 0, true, this.buildObservationTree(observations))}\n      </div>\n    </div>\n    <div class=\"main\">\n      <div class=\"main-header\" id=\"detail-header\">\n        <div>\n          <div class=\"main-title\" id=\"detail-title\">${this.escapeHtml(trace.name || 'Trace')}</div>\n          <div class=\"main-subtitle\" id=\"detail-subtitle\">${new Date(trace.timestamp).toLocaleString()}</div>\n          <div class=\"badges\" id=\"detail-badges\">\n            ${trace.tags?.map(t => `<span class=\"badge\">${this.escapeHtml(t)}</span>`).join('') || ''}\n          </div>\n        </div>\n        <div class=\"actions\">\n          <button class=\"btn\" onclick=\"refresh()\">↻ Refresh</button>\n          <button class=\"btn btn-primary\" onclick=\"openInBrowser()\">↗ Open in Langfuse</button>\n        </div>\n      </div>\n      <div class=\"main-content\" id=\"detail-content\">\n        ${this.renderDetailContent('trace', trace)}\n      </div>\n    </div>\n  </div>\n\n  <script>\n    const vscode = acquireVsCodeApi();\n    const traceData = ${JSON.stringify(trace)};\n    const observations = ${JSON.stringify(observations)};\n    const obsMap = new Map(observations.map(o => [o.id, o]));\n\n    function refresh() { vscode.postMessage({ command: 'refresh' }); }\n    function openInBrowser() { vscode.postMessage({ command: 'openInBrowser' }); }\n\n    function toggleTree(el, e) {\n      e.stopPropagation();\n      el.closest('.tree-item').classList.toggle('expanded');\n    }\n\n    function toggleSection(el) {\n      el.closest('.section').classList.toggle('collapsed');\n    }\n\n    function toggleJson(el, e) {\n      e.stopPropagation();\n      el.closest('.json-node').classList.toggle('json-collapsed');\n    }\n\n    function selectItem(type, id) {\n      document.querySelectorAll('.tree-item').forEach(el => el.classList.remove('selected'));\n      const item = document.querySelector('[data-id=\"' + id + '\"]');\n      if (item) item.classList.add('selected');\n\n      if (type === 'trace') {\n        showTraceDetail();\n      } else {\n        const obs = obsMap.get(id);\n        if (obs) showObservationDetail(obs);\n      }\n    }\n\n    function showTraceDetail() {\n      document.getElementById('detail-title').textContent = traceData.name || 'Trace';\n      document.getElementById('detail-subtitle').textContent = new Date(traceData.timestamp).toLocaleString();\n      document.getElementById('detail-badges').innerHTML = (traceData.tags || [])\n        .map(t => '<span class=\"badge\">' + escapeHtml(t) + '</span>').join('');\n      document.getElementById('detail-content').innerHTML = renderContent(traceData.input, traceData.output, traceData.metadata);\n    }\n\n    function showObservationDetail(obs) {\n      document.getElementById('detail-title').textContent = obs.name || obs.type;\n      document.getElementById('detail-subtitle').textContent = new Date(obs.startTime).toLocaleString();\n      \n      const duration = obs.endTime \n        ? ((new Date(obs.endTime) - new Date(obs.startTime)) / 1000).toFixed(2)\n        : null;\n      \n      let badges = '<span class=\"badge\">' + obs.type + '</span>';\n      if (duration) badges += '<span class=\"badge\">Latency: ' + duration + 's</span>';\n      if (obs.model) badges += '<span class=\"badge\">Model: ' + escapeHtml(obs.model) + '</span>';\n      if (obs.usage) {\n        const tokens = (obs.usage.input || 0) + (obs.usage.output || 0);\n        badges += '<span class=\"badge\">' + tokens + ' tokens</span>';\n      }\n      if (obs.costDetails) {\n        const cost = Object.values(obs.costDetails).reduce((a, b) => a + b, 0);\n        if (cost > 0) badges += '<span class=\"badge\">$' + cost.toFixed(6) + '</span>';\n      }\n      if (obs.level && obs.level !== 'DEFAULT') {\n        badges += '<span class=\"badge\" style=\"background:#ef4444;color:white\">' + obs.level + '</span>';\n      }\n      document.getElementById('detail-badges').innerHTML = badges;\n\n      let html = '';\n      if (obs.model || obs.usage) {\n        html += '<div class=\"model-info\">';\n        if (obs.model) html += '<div class=\"model-info-item\"><div class=\"model-info-label\">Model</div><div class=\"model-info-value\">' + escapeHtml(obs.model) + '</div></div>';\n        if (obs.usage) {\n          html += '<div class=\"model-info-item\"><div class=\"model-info-label\">Input Tokens</div><div class=\"model-info-value\">' + (obs.usage.input || 0) + '</div></div>';\n          html += '<div class=\"model-info-item\"><div class=\"model-info-label\">Output Tokens</div><div class=\"model-info-value\">' + (obs.usage.output || 0) + '</div></div>';\n        }\n        if (duration) html += '<div class=\"model-info-item\"><div class=\"model-info-label\">Duration</div><div class=\"model-info-value\">' + duration + 's</div></div>';\n        if (obs.costDetails) {\n          const cost = Object.values(obs.costDetails).reduce((a, b) => a + b, 0);\n          html += '<div class=\"model-info-item\"><div class=\"model-info-label\">Cost</div><div class=\"model-info-value\">$' + cost.toFixed(6) + '</div></div>';\n        }\n        html += '</div>';\n      }\n      html += renderContent(obs.input, obs.output, obs.metadata);\n      document.getElementById('detail-content').innerHTML = html;\n    }\n\n    function renderContent(input, output, metadata) {\n      let html = '';\n      html += renderSection('Input', input);\n      html += renderSection('Output', output);\n      if (metadata && Object.keys(metadata).length > 0) {\n        html += renderSection('Metadata', metadata);\n      }\n      return html;\n    }\n\n    function renderSection(title, data) {\n      const hasData = data !== null && data !== undefined;\n      return '<div class=\"section\">' +\n        '<div class=\"section-header\" onclick=\"toggleSection(this)\">' +\n          '<span class=\"section-chevron\">▼</span>' +\n          '<span>' + title + '</span>' +\n        '</div>' +\n        '<div class=\"section-content\">' +\n          (hasData ? '<div class=\"json-tree\">' + renderJsonTree(data, 0) + '</div>' : '<div class=\"empty\">No ' + title.toLowerCase() + '</div>') +\n        '</div>' +\n      '</div>';\n    }\n\n    function renderJsonTree(value, depth) {\n      if (value === null) return '<span class=\"json-null\">null</span>';\n      if (value === undefined) return '<span class=\"json-null\">undefined</span>';\n      \n      const type = typeof value;\n      if (type === 'string') {\n        const escaped = escapeHtml(value);\n        if (value.length > 500) {\n          return '<span class=\"json-string\">\"' + escaped.slice(0, 500) + '...\"</span>';\n        }\n        return '<span class=\"json-string\">\"' + escaped + '\"</span>';\n      }\n      if (type === 'number') return '<span class=\"json-number\">' + value + '</span>';\n      if (type === 'boolean') return '<span class=\"json-boolean\">' + value + '</span>';\n      \n      if (Array.isArray(value)) {\n        if (value.length === 0) return '<span class=\"json-bracket\">[]</span>';\n        const collapsed = depth > 1 ? ' json-collapsed' : '';\n        let html = '<span class=\"json-node' + collapsed + '\">';\n        html += '<span class=\"json-toggle\" onclick=\"toggleJson(this, event)\">▼</span>';\n        html += '<span class=\"json-bracket\">[</span>';\n        html += '<span class=\"json-item-count\">' + value.length + ' items</span>';\n        html += '<span class=\"json-children\">';\n        value.forEach((item, i) => {\n          html += '<div>' + renderJsonTree(item, depth + 1);\n          if (i < value.length - 1) html += ',';\n          html += '</div>';\n        });\n        html += '</span>';\n        html += '<span class=\"json-bracket\">]</span>';\n        html += '</span>';\n        return html;\n      }\n      \n      if (type === 'object') {\n        const keys = Object.keys(value);\n        if (keys.length === 0) return '<span class=\"json-bracket\">{}</span>';\n        const collapsed = depth > 1 ? ' json-collapsed' : '';\n        let html = '<span class=\"json-node' + collapsed + '\">';\n        html += '<span class=\"json-toggle\" onclick=\"toggleJson(this, event)\">▼</span>';\n        html += '<span class=\"json-bracket\">{</span>';\n        html += '<span class=\"json-item-count\">' + keys.length + ' keys</span>';\n        html += '<span class=\"json-children\">';\n        keys.forEach((key, i) => {\n          html += '<div><span class=\"json-key\">\"' + escapeHtml(key) + '\"</span>: ' + renderJsonTree(value[key], depth + 1);\n          if (i < keys.length - 1) html += ',';\n          html += '</div>';\n        });\n        html += '</span>';\n        html += '<span class=\"json-bracket\">}</span>';\n        html += '</span>';\n        return html;\n      }\n      \n      return '<span>' + escapeHtml(String(value)) + '</span>';\n    }\n\n    function escapeHtml(str) {\n      if (!str) return '';\n      return String(str)\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;');\n    }\n\n    document.querySelector('.tree-item')?.classList.add('selected');\n  </script>\n</body>\n</html>`;\n  }\n\n  private buildObservationTree(observations: Observation[]): Map<string | null, Observation[]> {\n    const tree = new Map<string | null, Observation[]>();\n    tree.set(null, []);\n    \n    observations.forEach(obs => {\n      const parentId = obs.parentObservationId || null;\n      if (!tree.has(parentId)) {\n        tree.set(parentId, []);\n      }\n      tree.get(parentId)!.push(obs);\n    });\n\n    tree.forEach(children => {\n      children.sort((a, b) => new Date(a.startTime).getTime() - new Date(b.startTime).getTime());\n    });\n\n    return tree;\n  }\n\n  private renderTreeItem(\n    type: 'trace' | 'span' | 'generation' | 'event',\n    id: string,\n    name: string,\n    duration: string,\n    level: string | null,\n    depth: number,\n    isRoot: boolean,\n    tree: Map<string | null, Observation[]>\n  ): string {\n    const children = isRoot ? tree.get(null) || [] : tree.get(id) || [];\n    const hasChildren = children.length > 0;\n    const levelLower = level?.toLowerCase();\n    const isError = levelLower === 'error';\n    const isWarning = levelLower === 'warning';\n\n    let childrenHtml = '';\n    if (hasChildren) {\n      childrenHtml = '<div class=\"tree-children\">';\n      for (const child of children) {\n        const childDuration = child.endTime \n          ? ((new Date(child.endTime).getTime() - new Date(child.startTime).getTime()) / 1000).toFixed(2) + 's'\n          : '';\n        childrenHtml += this.renderTreeItem(\n          child.type.toLowerCase() as 'span' | 'generation' | 'event',\n          child.id,\n          child.name || child.type,\n          childDuration,\n          child.level,\n          depth + 1,\n          false,\n          tree\n        );\n      }\n      childrenHtml += '</div>';\n    }\n\n    return `\n      <div class=\"tree-item${hasChildren ? ' expanded' : ''}\" data-id=\"${id}\">\n        <div class=\"tree-item-header depth-${Math.min(depth, 5)}\" onclick=\"selectItem('${type}', '${id}')\">\n          <span class=\"tree-chevron\" onclick=\"toggleTree(this, event)\">${hasChildren ? '▶' : ''}</span>\n          <span class=\"tree-icon ${type}\">${this.getTypeIcon(type)}</span>\n          <span class=\"tree-name\">${this.escapeHtml(name)}</span>\n          ${isError ? '<span class=\"tree-badge error\">ERROR</span>' : ''}\n          ${isWarning ? '<span class=\"tree-badge warning\">WARN</span>' : ''}\n          <span class=\"tree-duration\">${duration}</span>\n        </div>\n        ${childrenHtml}\n      </div>\n    `;\n  }\n\n  private getTypeIcon(type: string): string {\n    switch (type) {\n      case 'trace': return '⊙';\n      case 'span': return '↔';\n      case 'generation': return '✦';\n      case 'event': return '⚡';\n      default: return '○';\n    }\n  }\n\n  private renderDetailContent(type: string, data: Trace | Observation): string {\n    return `\n      ${this.renderSection('Input', data.input)}\n      ${this.renderSection('Output', data.output)}\n      ${data.metadata && Object.keys(data.metadata).length > 0 ? this.renderSection('Metadata', data.metadata) : ''}\n    `;\n  }\n\n  private renderSection(title: string, data: unknown): string {\n    const hasData = data !== null && data !== undefined;\n    return `<div class=\"section\">\n      <div class=\"section-header\" onclick=\"toggleSection(this)\">\n        <span class=\"section-chevron\">▼</span>\n        <span>${title}</span>\n      </div>\n      <div class=\"section-content\">\n        ${hasData ? `<div class=\"json-tree\">${this.renderJsonTree(data, 0)}</div>` : `<div class=\"empty\">No ${title.toLowerCase()}</div>`}\n      </div>\n    </div>`;\n  }\n\n  private renderJsonTree(value: unknown, depth: number): string {\n    if (value === null) return '<span class=\"json-null\">null</span>';\n    if (value === undefined) return '<span class=\"json-null\">undefined</span>';\n    \n    const type = typeof value;\n    if (type === 'string') {\n      const escaped = this.escapeHtml(value as string);\n      if ((value as string).length > 500) {\n        return `<span class=\"json-string\">\"${escaped.slice(0, 500)}...\"</span>`;\n      }\n      return `<span class=\"json-string\">\"${escaped}\"</span>`;\n    }\n    if (type === 'number') return `<span class=\"json-number\">${value}</span>`;\n    if (type === 'boolean') return `<span class=\"json-boolean\">${value}</span>`;\n    \n    if (Array.isArray(value)) {\n      if (value.length === 0) return '<span class=\"json-bracket\">[]</span>';\n      const collapsed = depth > 1 ? ' json-collapsed' : '';\n      let html = `<span class=\"json-node${collapsed}\">`;\n      html += '<span class=\"json-toggle\" onclick=\"toggleJson(this, event)\">▼</span>';\n      html += '<span class=\"json-bracket\">[</span>';\n      html += `<span class=\"json-item-count\">${value.length} items</span>`;\n      html += '<span class=\"json-children\">';\n      value.forEach((item, i) => {\n        html += `<div>${this.renderJsonTree(item, depth + 1)}${i < value.length - 1 ? ',' : ''}</div>`;\n      });\n      html += '</span>';\n      html += '<span class=\"json-bracket\">]</span></span>';\n      return html;\n    }\n    \n    if (type === 'object') {\n      const keys = Object.keys(value as object);\n      if (keys.length === 0) return '<span class=\"json-bracket\">{}</span>';\n      const collapsed = depth > 1 ? ' json-collapsed' : '';\n      let html = `<span class=\"json-node${collapsed}\">`;\n      html += '<span class=\"json-toggle\" onclick=\"toggleJson(this, event)\">▼</span>';\n      html += '<span class=\"json-bracket\">{</span>';\n      html += `<span class=\"json-item-count\">${keys.length} keys</span>`;\n      html += '<span class=\"json-children\">';\n      keys.forEach((key, i) => {\n        html += `<div><span class=\"json-key\">\"${this.escapeHtml(key)}\"</span>: ${this.renderJsonTree((value as Record<string, unknown>)[key], depth + 1)}${i < keys.length - 1 ? ',' : ''}</div>`;\n      });\n      html += '</span>';\n      html += '<span class=\"json-bracket\">}</span></span>';\n      return html;\n    }\n    \n    return `<span>${this.escapeHtml(String(value))}</span>`;\n  }\n\n  private escapeHtml(str: string): string {\n    return str\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;');\n  }\n\n  private dispose(): void {\n    const key = `${this.connectionId}:${this.traceId}`;\n    TraceDetailPanel.panels.delete(key);\n    this.disposables.forEach(d => d.dispose());\n  }\n}\n","import * as vscode from 'vscode';\nimport { ConnectionManager } from '../core/ConnectionManager';\nimport { Trace, Observation } from '../types';\nimport { ConnectionItem, TraceItem, ObservationItem, LoadOlderItem, MessageItem } from './TreeItems';\n\nconst WINDOW_MS = 30 * 60 * 1000;\n\ninterface TracesWindow {\n  traces: Trace[];\n  oldestTimestamp: Date;\n  newestTimestamp: Date;\n  hasMore: boolean;\n}\n\nexport class LangfuseTreeProvider implements vscode.TreeDataProvider<vscode.TreeItem> {\n  private _onDidChangeTreeData = new vscode.EventEmitter<vscode.TreeItem | undefined>();\n  readonly onDidChangeTreeData = this._onDidChangeTreeData.event;\n\n  private tracesCache = new Map<string, TracesWindow>();\n  private observationsCache = new Map<string, Observation[]>();\n  private searchQuery: string | undefined;\n\n  constructor(private connectionManager: ConnectionManager) {\n    connectionManager.onDidChange(() => this.refresh());\n  }\n\n  refresh(): void {\n    this.tracesCache.clear();\n    this.observationsCache.clear();\n    this._onDidChangeTreeData.fire(undefined);\n  }\n\n  setSearchQuery(query: string | undefined): void {\n    this.searchQuery = query;\n    this.refresh();\n  }\n\n  getSearchQuery(): string | undefined {\n    return this.searchQuery;\n  }\n\n  clearSearch(): void {\n    this.searchQuery = undefined;\n    this.refresh();\n  }\n\n  getTreeItem(element: vscode.TreeItem): vscode.TreeItem {\n    return element;\n  }\n\n  async getChildren(element?: vscode.TreeItem): Promise<vscode.TreeItem[]> {\n    if (!element) {\n      return this.getConnectionItems();\n    }\n\n    if (element instanceof ConnectionItem) {\n      return this.getTraceItems(element.config.id);\n    }\n\n    if (element instanceof TraceItem) {\n      return this.getObservationItems(element.connectionId, element.trace.id, null);\n    }\n\n    if (element instanceof ObservationItem) {\n      return this.getObservationItems(element.connectionId, element.traceId, element.observation.id);\n    }\n\n    return [];\n  }\n\n  private getConnectionItems(): vscode.TreeItem[] {\n    const configs = this.connectionManager.getConnections();\n    if (configs.length === 0) {\n      return [new MessageItem('No connections. Click + to add.', 'info')];\n    }\n    return configs.map((config) => new ConnectionItem(\n      config,\n      this.connectionManager.isConnected(config.id)\n    ));\n  }\n\n  private async getTraceItems(connectionId: string): Promise<vscode.TreeItem[]> {\n    if (!this.connectionManager.isConnected(connectionId)) {\n      try {\n        await this.connectionManager.connect(connectionId);\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'Connection failed';\n        return [new MessageItem(`Error: ${message}`, 'error')];\n      }\n    }\n\n    const client = this.connectionManager.getClient(connectionId);\n    if (!client) {\n      return [new MessageItem('Client not available', 'error')];\n    }\n\n    try {\n      let window = this.tracesCache.get(connectionId);\n      \n      const projectId = await client.getProjectId();\n      \n      if (!window) {\n        const now = new Date();\n        const thirtyMinsAgo = new Date(now.getTime() - WINDOW_MS);\n        \n        const response = await client.getTraces({\n          fromTimestamp: thirtyMinsAgo.toISOString(),\n          toTimestamp: now.toISOString(),\n          name: this.searchQuery,\n        }, 1, 100);\n        \n        const tracesWithProjectId = response.data.map(t => ({ ...t, projectId: projectId || undefined }));\n        \n        window = {\n          traces: tracesWithProjectId,\n          newestTimestamp: now,\n          oldestTimestamp: thirtyMinsAgo,\n          hasMore: true,\n        };\n        this.tracesCache.set(connectionId, window);\n      }\n\n      return this.buildTraceTreeItems(connectionId, window!, client.baseUrl);\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Unknown error';\n      return [new MessageItem(`Error: ${message}`, 'error')];\n    }\n  }\n\n  private buildTraceTreeItems(connectionId: string, window: TracesWindow, baseUrl: string): vscode.TreeItem[] {\n    const items: vscode.TreeItem[] = [];\n\n    if (window.traces.length === 0) {\n      items.push(new MessageItem('No traces in this time window', 'info'));\n    } else {\n      const sortedTraces = [...window.traces].sort(\n        (a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()\n      );\n      \n      for (const trace of sortedTraces) {\n        items.push(new TraceItem(trace, connectionId, baseUrl, true));\n      }\n    }\n\n    if (window.hasMore) {\n      const olderEnd = window.oldestTimestamp;\n      const olderStart = new Date(olderEnd.getTime() - WINDOW_MS);\n      items.push(new LoadOlderItem(connectionId, olderStart, olderEnd));\n    }\n\n    return items;\n  }\n\n  async loadOlderTraces(connectionId: string, fromTime: Date, toTime: Date): Promise<void> {\n    const client = this.connectionManager.getClient(connectionId);\n    if (!client) { return; }\n\n    const window = this.tracesCache.get(connectionId);\n    if (!window) { return; }\n\n    try {\n      await vscode.window.withProgress({\n        location: vscode.ProgressLocation.Notification,\n        title: `Loading traces from ${formatTimeRange(fromTime, toTime)}...`,\n        cancellable: false,\n      }, async () => {\n        const projectId = await client.getProjectId();\n        \n        const response = await client.getTraces({\n          fromTimestamp: fromTime.toISOString(),\n          toTimestamp: toTime.toISOString(),\n          name: this.searchQuery,\n        }, 1, 100);\n\n        const tracesWithProjectId = response.data.map(t => ({ ...t, projectId: projectId || undefined }));\n        window.traces.push(...tracesWithProjectId);\n        window.oldestTimestamp = fromTime;\n        \n        const oneDayAgo = new Date(Date.now() - 24 * 60 * 60 * 1000);\n        window.hasMore = fromTime > oneDayAgo;\n\n        this._onDidChangeTreeData.fire(undefined);\n      });\n    } catch (error) {\n      vscode.window.showErrorMessage(\n        `Failed to load older traces: ${error instanceof Error ? error.message : 'Unknown error'}`\n      );\n    }\n  }\n\n  private async getObservationItems(\n    connectionId: string,\n    traceId: string,\n    parentId: string | null\n  ): Promise<vscode.TreeItem[]> {\n    const cacheKey = `${connectionId}:${traceId}`;\n    let observations = this.observationsCache.get(cacheKey);\n\n    if (!observations) {\n      const client = this.connectionManager.getClient(connectionId);\n      if (!client) {\n        return [new MessageItem('Client not available', 'error')];\n      }\n\n      try {\n        const trace = await client.getTrace(traceId);\n        observations = trace.observations || [];\n        this.observationsCache.set(cacheKey, observations);\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'Unknown error';\n        return [new MessageItem(`Error: ${message}`, 'error')];\n      }\n    }\n\n    const children = observations.filter(obs => obs.parentObservationId === parentId);\n    \n    if (children.length === 0) {\n      if (parentId === null) {\n        return [new MessageItem('No observations', 'info')];\n      }\n      return [];\n    }\n\n    return children\n      .sort((a, b) => new Date(a.startTime).getTime() - new Date(b.startTime).getTime())\n      .map(obs => {\n        const childCount = observations!.filter(o => o.parentObservationId === obs.id).length;\n        return new ObservationItem(obs, traceId, connectionId, childCount);\n      });\n  }\n}\n\nfunction formatTimeRange(from: Date, to: Date): string {\n  const formatTime = (d: Date) => d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  return `${formatTime(from)} - ${formatTime(to)}`;\n}\n","import * as vscode from 'vscode';\nimport { ConnectionConfig } from '../types';\nimport { LangfuseClient } from '../core/LangfuseClient';\n\nexport class ConnectionFormPanel {\n  private static panels = new Map<string, ConnectionFormPanel>();\n  private readonly panel: vscode.WebviewPanel;\n  private disposables: vscode.Disposable[] = [];\n\n  private constructor(\n    panel: vscode.WebviewPanel,\n    private extensionUri: vscode.Uri,\n    private existingConfig: ConnectionConfig | undefined,\n    private onSave: (config: ConnectionConfig, secretKey: string) => Promise<void>\n  ) {\n    this.panel = panel;\n    this.panel.webview.html = this.getHtml();\n    this.panel.onDidDispose(() => this.dispose(), null, this.disposables);\n    this.panel.webview.onDidReceiveMessage(\n      message => this.handleMessage(message),\n      null,\n      this.disposables\n    );\n  }\n\n  static show(\n    extensionUri: vscode.Uri,\n    existingConfig: ConnectionConfig | undefined,\n    onSave: (config: ConnectionConfig, secretKey: string) => Promise<void>\n  ): void {\n    const key = existingConfig?.id || 'new';\n    const existing = this.panels.get(key);\n    if (existing) {\n      existing.panel.reveal();\n      return;\n    }\n\n    const panel = vscode.window.createWebviewPanel(\n      'langfuseConnectionForm',\n      existingConfig ? `Edit: ${existingConfig.name}` : 'New Langfuse Connection',\n      vscode.ViewColumn.One,\n      { enableScripts: true, retainContextWhenHidden: true }\n    );\n\n    const formPanel = new ConnectionFormPanel(panel, extensionUri, existingConfig, onSave);\n    this.panels.set(key, formPanel);\n  }\n\n  private async handleMessage(message: { command: string; [key: string]: unknown }): Promise<void> {\n    switch (message.command) {\n      case 'save':\n        await this.handleSave(message as { command: string; name: string; url: string; publicKey: string; secretKey: string });\n        break;\n      case 'test':\n        await this.handleTest(message as { command: string; url: string; publicKey: string; secretKey: string });\n        break;\n      case 'cancel':\n        this.panel.dispose();\n        break;\n    }\n  }\n\n  private async handleSave(data: { name: string; url: string; publicKey: string; secretKey: string }): Promise<void> {\n    const config: ConnectionConfig = {\n      id: this.existingConfig?.id || crypto.randomUUID(),\n      name: data.name,\n      url: data.url.replace(/\\/$/, ''),\n      publicKey: data.publicKey\n    };\n\n    try {\n      await this.onSave(config, data.secretKey);\n      this.panel.dispose();\n    } catch (error) {\n      this.postMessage({\n        command: 'error',\n        message: error instanceof Error ? error.message : 'Failed to save connection'\n      });\n    }\n  }\n\n  private async handleTest(data: { url: string; publicKey: string; secretKey: string }): Promise<void> {\n    this.postMessage({ command: 'testing' });\n\n    try {\n      const client = new LangfuseClient(data.url.replace(/\\/$/, ''), data.publicKey, data.secretKey);\n      const healthy = await client.healthCheck();\n      \n      this.postMessage({\n        command: 'testResult',\n        success: healthy,\n        message: healthy ? 'Connection successful!' : 'Connection failed'\n      });\n    } catch (error) {\n      this.postMessage({\n        command: 'testResult',\n        success: false,\n        message: error instanceof Error ? error.message : 'Connection failed'\n      });\n    }\n  }\n\n  private postMessage(message: object): void {\n    this.panel.webview.postMessage(message);\n  }\n\n  private getHtml(): string {\n    const config = this.existingConfig;\n    return `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <style>\n    body {\n      font-family: var(--vscode-font-family);\n      padding: 20px;\n      color: var(--vscode-foreground);\n      background: var(--vscode-editor-background);\n    }\n    .form-group {\n      margin-bottom: 16px;\n    }\n    label {\n      display: block;\n      margin-bottom: 4px;\n      font-weight: 500;\n    }\n    input {\n      width: 100%;\n      padding: 8px;\n      border: 1px solid var(--vscode-input-border);\n      background: var(--vscode-input-background);\n      color: var(--vscode-input-foreground);\n      border-radius: 4px;\n      box-sizing: border-box;\n    }\n    input:focus {\n      outline: 1px solid var(--vscode-focusBorder);\n    }\n    .hint {\n      font-size: 12px;\n      color: var(--vscode-descriptionForeground);\n      margin-top: 4px;\n    }\n    .buttons {\n      display: flex;\n      gap: 8px;\n      margin-top: 24px;\n    }\n    button {\n      padding: 8px 16px;\n      border: none;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 13px;\n    }\n    .primary {\n      background: var(--vscode-button-background);\n      color: var(--vscode-button-foreground);\n    }\n    .primary:hover {\n      background: var(--vscode-button-hoverBackground);\n    }\n    .secondary {\n      background: var(--vscode-button-secondaryBackground);\n      color: var(--vscode-button-secondaryForeground);\n    }\n    .message {\n      padding: 8px 12px;\n      border-radius: 4px;\n      margin-top: 16px;\n      display: none;\n    }\n    .message.success {\n      background: var(--vscode-testing-iconPassed);\n      color: white;\n      display: block;\n    }\n    .message.error {\n      background: var(--vscode-testing-iconFailed);\n      color: white;\n      display: block;\n    }\n    .message.testing {\n      background: var(--vscode-button-secondaryBackground);\n      display: block;\n    }\n  </style>\n</head>\n<body>\n  <h2>${config ? 'Edit Connection' : 'New Connection'}</h2>\n  \n  <div class=\"form-group\">\n    <label for=\"name\">Connection Name</label>\n    <input type=\"text\" id=\"name\" value=\"${config?.name || ''}\" placeholder=\"My Langfuse Project\">\n  </div>\n\n  <div class=\"form-group\">\n    <label for=\"url\">Langfuse URL</label>\n    <input type=\"text\" id=\"url\" value=\"${config?.url || 'https://cloud.langfuse.com'}\" placeholder=\"https://cloud.langfuse.com\">\n    <div class=\"hint\">Use https://cloud.langfuse.com for cloud, or your self-hosted URL</div>\n  </div>\n\n  <div class=\"form-group\">\n    <label for=\"publicKey\">Public Key</label>\n    <input type=\"text\" id=\"publicKey\" value=\"${config?.publicKey || ''}\" placeholder=\"pk-lf-...\">\n  </div>\n\n  <div class=\"form-group\">\n    <label for=\"secretKey\">Secret Key</label>\n    <input type=\"password\" id=\"secretKey\" placeholder=\"sk-lf-...\">\n    <div class=\"hint\">${config ? 'Leave empty to keep existing key' : 'Your secret key is stored securely'}</div>\n  </div>\n\n  <div class=\"buttons\">\n    <button class=\"primary\" onclick=\"save()\">Save</button>\n    <button class=\"secondary\" onclick=\"test()\">Test Connection</button>\n    <button class=\"secondary\" onclick=\"cancel()\">Cancel</button>\n  </div>\n\n  <div id=\"message\" class=\"message\"></div>\n\n  <script>\n    const vscode = acquireVsCodeApi();\n\n    function save() {\n      vscode.postMessage({\n        command: 'save',\n        name: document.getElementById('name').value,\n        url: document.getElementById('url').value,\n        publicKey: document.getElementById('publicKey').value,\n        secretKey: document.getElementById('secretKey').value\n      });\n    }\n\n    function test() {\n      vscode.postMessage({\n        command: 'test',\n        url: document.getElementById('url').value,\n        publicKey: document.getElementById('publicKey').value,\n        secretKey: document.getElementById('secretKey').value\n      });\n    }\n\n    function cancel() {\n      vscode.postMessage({ command: 'cancel' });\n    }\n\n    window.addEventListener('message', event => {\n      const msg = event.data;\n      const el = document.getElementById('message');\n      \n      if (msg.command === 'testing') {\n        el.className = 'message testing';\n        el.textContent = 'Testing connection...';\n      } else if (msg.command === 'testResult') {\n        el.className = 'message ' + (msg.success ? 'success' : 'error');\n        el.textContent = msg.message;\n      } else if (msg.command === 'error') {\n        el.className = 'message error';\n        el.textContent = msg.message;\n      }\n    });\n  </script>\n</body>\n</html>`;\n  }\n\n  private dispose(): void {\n    const key = this.existingConfig?.id || 'new';\n    ConnectionFormPanel.panels.delete(key);\n    this.disposables.forEach(d => d.dispose());\n  }\n}\n","import * as vscode from 'vscode';\nimport { ConnectionConfig } from '../types';\n\nconst CONNECTIONS_KEY = 'langfusecode.connections';\n\nexport class ConnectionStorage {\n  constructor(private readonly context: vscode.ExtensionContext) {}\n\n  getConnections(): ConnectionConfig[] {\n    return this.context.globalState.get<ConnectionConfig[]>(CONNECTIONS_KEY) || [];\n  }\n\n  async saveConnections(connections: ConnectionConfig[]): Promise<void> {\n    await this.context.globalState.update(CONNECTIONS_KEY, connections);\n  }\n\n  async addConnection(config: ConnectionConfig): Promise<void> {\n    const connections = this.getConnections();\n    connections.push(config);\n    await this.saveConnections(connections);\n  }\n\n  async updateConnection(config: ConnectionConfig): Promise<void> {\n    const connections = this.getConnections();\n    const index = connections.findIndex(c => c.id === config.id);\n    if (index !== -1) {\n      connections[index] = config;\n      await this.saveConnections(connections);\n    }\n  }\n\n  async removeConnection(id: string): Promise<void> {\n    const connections = this.getConnections().filter(c => c.id !== id);\n    await this.saveConnections(connections);\n  }\n\n  async getSecretKey(connectionId: string): Promise<string | undefined> {\n    return this.context.secrets.get(`langfusecode.secret.${connectionId}`);\n  }\n\n  async setSecretKey(connectionId: string, secretKey: string): Promise<void> {\n    await this.context.secrets.store(`langfusecode.secret.${connectionId}`, secretKey);\n  }\n\n  async deleteSecretKey(connectionId: string): Promise<void> {\n    await this.context.secrets.delete(`langfusecode.secret.${connectionId}`);\n  }\n}\n","import * as vscode from 'vscode';\nimport { ConnectionConfig, Trace, Observation } from '../types';\n\nexport class ConnectionItem extends vscode.TreeItem {\n  constructor(\n    public readonly config: ConnectionConfig,\n    public readonly isConnected: boolean\n  ) {\n    super(config.name, vscode.TreeItemCollapsibleState.Collapsed);\n    this.contextValue = isConnected ? 'connection-connected' : 'connection-disconnected';\n    this.iconPath = new vscode.ThemeIcon(isConnected ? 'plug' : 'debug-disconnect');\n    this.description = new URL(config.url).host;\n    this.tooltip = `${config.name}\\n${config.url}\\nStatus: ${isConnected ? 'Connected' : 'Disconnected'}`;\n  }\n}\n\nexport class TraceItem extends vscode.TreeItem {\n  constructor(\n    public readonly trace: Trace,\n    public readonly connectionId: string,\n    public readonly baseUrl: string,\n    hasChildren: boolean\n  ) {\n    super(\n      trace.name || trace.id.slice(0, 8),\n      hasChildren ? vscode.TreeItemCollapsibleState.Collapsed : vscode.TreeItemCollapsibleState.None\n    );\n    this.contextValue = 'trace';\n    this.iconPath = new vscode.ThemeIcon('symbol-event');\n    this.description = formatTimestamp(trace.timestamp);\n    this.tooltip = buildTraceTooltip(trace);\n    this.command = {\n      command: 'langfusecode.viewTrace',\n      title: 'View Trace',\n      arguments: [this]\n    };\n  }\n}\n\nexport class ObservationItem extends vscode.TreeItem {\n  constructor(\n    public readonly observation: Observation,\n    public readonly traceId: string,\n    public readonly connectionId: string,\n    childCount: number\n  ) {\n    super(\n      observation.name || observation.id.slice(0, 8),\n      childCount > 0 ? vscode.TreeItemCollapsibleState.Collapsed : vscode.TreeItemCollapsibleState.None\n    );\n    this.contextValue = 'observation';\n    this.iconPath = getObservationIcon(observation.type, observation.level);\n    this.description = formatObservationDescription(observation);\n    this.tooltip = buildObservationTooltip(observation);\n  }\n}\n\nexport class LoadOlderItem extends vscode.TreeItem {\n  constructor(\n    public readonly connectionId: string,\n    public readonly fromTime: Date,\n    public readonly toTime: Date\n  ) {\n    const timeStr = formatTimeRange(fromTime, toTime);\n    super(`Load older traces (${timeStr})`, vscode.TreeItemCollapsibleState.None);\n    this.contextValue = 'loadOlder';\n    this.iconPath = new vscode.ThemeIcon('history');\n    this.command = {\n      command: 'langfusecode.loadOlderTraces',\n      title: 'Load Older',\n      arguments: [connectionId, fromTime, toTime]\n    };\n  }\n}\n\nfunction formatTimeRange(from: Date, to: Date): string {\n  const formatTime = (d: Date) => d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  const formatDate = (d: Date) => d.toLocaleDateString([], { month: 'short', day: 'numeric' });\n  \n  const now = new Date();\n  const isToday = (d: Date) => d.toDateString() === now.toDateString();\n  \n  if (isToday(from) && isToday(to)) {\n    return `${formatTime(from)} - ${formatTime(to)}`;\n  }\n  return `${formatDate(from)} ${formatTime(from)}`;\n}\n\nexport class MessageItem extends vscode.TreeItem {\n  constructor(message: string, icon: string = 'info') {\n    super(message, vscode.TreeItemCollapsibleState.None);\n    this.iconPath = new vscode.ThemeIcon(icon);\n  }\n}\n\nfunction formatTimestamp(timestamp: string): string {\n  const date = new Date(timestamp);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffMins < 1) { return 'just now'; }\n  if (diffMins < 60) { return `${diffMins}m ago`; }\n  if (diffHours < 24) { return `${diffHours}h ago`; }\n  if (diffDays < 7) { return `${diffDays}d ago`; }\n  return date.toLocaleDateString();\n}\n\nfunction getObservationIcon(type: Observation['type'], level: Observation['level']): vscode.ThemeIcon {\n  if (level === 'ERROR') { return new vscode.ThemeIcon('error', new vscode.ThemeColor('errorForeground')); }\n  if (level === 'WARNING') { return new vscode.ThemeIcon('warning', new vscode.ThemeColor('editorWarning.foreground')); }\n\n  switch (type) {\n    case 'GENERATION': return new vscode.ThemeIcon('sparkle');\n    case 'SPAN': return new vscode.ThemeIcon('symbol-method');\n    case 'EVENT': return new vscode.ThemeIcon('symbol-event');\n    default: return new vscode.ThemeIcon('circle-outline');\n  }\n}\n\nfunction formatObservationDescription(obs: Observation): string {\n  const parts: string[] = [];\n  \n  if (obs.startTime && obs.endTime) {\n    const durationMs = new Date(obs.endTime).getTime() - new Date(obs.startTime).getTime();\n    parts.push(formatDuration(durationMs));\n  }\n  \n  if (obs.model) { parts.push(obs.model); }\n  \n  if (obs.usage?.total) { parts.push(`${obs.usage.total} tokens`); }\n  \n  return parts.join(' · ');\n}\n\nfunction formatDuration(ms: number): string {\n  if (ms < 1000) { return `${ms}ms`; }\n  if (ms < 60000) { return `${(ms / 1000).toFixed(1)}s`; }\n  return `${(ms / 60000).toFixed(1)}m`;\n}\n\nfunction buildTraceTooltip(trace: Trace): string {\n  const lines = [\n    `ID: ${trace.id}`,\n    `Time: ${new Date(trace.timestamp).toLocaleString()}`\n  ];\n  if (trace.name) { lines.push(`Name: ${trace.name}`); }\n  if (trace.userId) { lines.push(`User: ${trace.userId}`); }\n  if (trace.sessionId) { lines.push(`Session: ${trace.sessionId}`); }\n  if (trace.tags.length > 0) { lines.push(`Tags: ${trace.tags.join(', ')}`); }\n  return lines.join('\\n');\n}\n\nfunction buildObservationTooltip(obs: Observation): string {\n  const lines = [\n    `Type: ${obs.type}`,\n    `ID: ${obs.id}`\n  ];\n  if (obs.name) { lines.push(`Name: ${obs.name}`); }\n  if (obs.model) { lines.push(`Model: ${obs.model}`); }\n  if (obs.usage) {\n    const usage = [];\n    if (obs.usage.input) { usage.push(`in: ${obs.usage.input}`); }\n    if (obs.usage.output) { usage.push(`out: ${obs.usage.output}`); }\n    if (usage.length) { lines.push(`Tokens: ${usage.join(', ')}`); }\n  }\n  if (obs.level !== 'DEFAULT') { lines.push(`Level: ${obs.level}`); }\n  return lines.join('\\n');\n}\n","import * as vscode from 'vscode';\nimport { ConnectionManager } from './core/ConnectionManager';\nimport { LangfuseTreeProvider } from './views/TreeProvider';\nimport { registerConnectionCommands } from './commands/connection';\nimport { registerTraceCommands } from './commands/trace';\nimport { registerFilterCommands } from './commands/filter';\n\nlet connectionManager: ConnectionManager;\nlet treeProvider: LangfuseTreeProvider;\n\nexport async function activate(context: vscode.ExtensionContext): Promise<void> {\n  connectionManager = new ConnectionManager(context);\n  await connectionManager.initialize();\n\n  treeProvider = new LangfuseTreeProvider(connectionManager);\n  \n  const treeView = vscode.window.createTreeView('langfuseExplorer', {\n    treeDataProvider: treeProvider,\n    showCollapseAll: true,\n  });\n\n  context.subscriptions.push(treeView);\n\n  registerConnectionCommands(context, connectionManager, treeProvider);\n  registerTraceCommands(context, connectionManager);\n  registerFilterCommands(context, treeProvider);\n\n  context.subscriptions.push(\n    vscode.commands.registerCommand('langfusecode.refresh', () => {\n      treeProvider.refresh();\n    }),\n    vscode.commands.registerCommand('langfusecode.loadOlderTraces', \n      (connectionId: string, fromTime: Date, toTime: Date) => {\n        treeProvider.loadOlderTraces(connectionId, fromTime, toTime);\n      }\n    )\n  );\n}\n\nexport function deactivate(): void {\n  connectionManager?.cleanup();\n}\n","module.exports = require(\"vscode\");","import * as vscode from 'vscode';\nimport { ConnectionManager } from '../core/ConnectionManager';\nimport { TraceItem, ObservationItem } from '../views/TreeItems';\nimport { TraceDetailPanel } from '../panels/TraceDetailPanel';\n\nexport function registerTraceCommands(\n  context: vscode.ExtensionContext,\n  connectionManager: ConnectionManager\n): void {\n  context.subscriptions.push(\n    vscode.commands.registerCommand('langfusecode.viewTrace', (item: TraceItem) => {\n      TraceDetailPanel.show(item.connectionId, item.trace, connectionManager);\n    }),\n\n    vscode.commands.registerCommand('langfusecode.openInBrowser', (item: TraceItem | ObservationItem) => {\n      const config = connectionManager.getConnections().find((c) => c.id === item.connectionId);\n      if (!config) {\n        return;\n      }\n\n      let url: string;\n      if (item instanceof TraceItem) {\n        const projectId = item.trace.projectId || 'default';\n        url = `${config.url}/project/${projectId}/traces/${item.trace.id}`;\n      } else {\n        const projectId = 'default';\n        url = `${config.url}/project/${projectId}/traces/${item.observation.traceId}?observation=${item.observation.id}`;\n      }\n\n      vscode.env.openExternal(vscode.Uri.parse(url));\n    })\n  );\n}\n","import {\n  Trace,\n  TraceWithObservations,\n  Observation,\n  PaginatedResponse,\n  TraceFilter,\n} from '../types';\n\ninterface ProjectInfo {\n  id: string;\n  name: string;\n}\n\ninterface RetryOptions {\n  maxRetries: number;\n  baseDelayMs: number;\n}\n\nexport class LangfuseClient {\n  readonly baseUrl: string;\n  private readonly authHeader: string;\n  private projectId: string | null = null;\n  private readonly requestTimeout: number = 60000;\n  private readonly retryOptions: RetryOptions = { maxRetries: 2, baseDelayMs: 1000 };\n\n  constructor(baseUrl: string, publicKey: string, secretKey: string) {\n    this.baseUrl = baseUrl.replace(/\\/$/, '');\n    this.authHeader = 'Basic ' + Buffer.from(`${publicKey}:${secretKey}`).toString('base64');\n  }\n\n  private async sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  private async request<T>(endpoint: string, options: RequestInit = {}): Promise<T> {\n    const url = `${this.baseUrl}/api/public${endpoint}`;\n    let lastError: Error | null = null;\n\n    for (let attempt = 0; attempt <= this.retryOptions.maxRetries; attempt++) {\n      if (attempt > 0) {\n        const delay = this.retryOptions.baseDelayMs * Math.pow(2, attempt - 1);\n        await this.sleep(delay);\n      }\n\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), this.requestTimeout);\n\n      try {\n        const response = await fetch(url, {\n          ...options,\n          signal: controller.signal,\n          headers: {\n            'Authorization': this.authHeader,\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            ...options.headers,\n          },\n        });\n\n        clearTimeout(timeoutId);\n\n        if (response.status === 500 || response.status === 502 || response.status === 503) {\n          const errorText = await response.text().catch(() => 'Server error');\n          lastError = new Error(`Server error (${response.status}): ${errorText.slice(0, 200)}`);\n          if (attempt < this.retryOptions.maxRetries) {\n            continue;\n          }\n          throw lastError;\n        }\n\n        if (!response.ok) {\n          const errorText = await response.text().catch(() => 'Unknown error');\n          throw new Error(`Langfuse API error (${response.status}): ${errorText.slice(0, 200)}`);\n        }\n\n        return response.json() as Promise<T>;\n      } catch (error) {\n        clearTimeout(timeoutId);\n        \n        if (error instanceof Error && error.name === 'AbortError') {\n          lastError = new Error(`Request timeout after ${this.requestTimeout / 1000}s - try reducing page size or date range`);\n          if (attempt < this.retryOptions.maxRetries) {\n            continue;\n          }\n          throw lastError;\n        }\n        \n        if (error instanceof Error && (error.message.includes('fetch') || error.message.includes('network'))) {\n          lastError = error;\n          if (attempt < this.retryOptions.maxRetries) {\n            continue;\n          }\n        }\n        \n        throw error;\n      }\n    }\n\n    throw lastError || new Error('Request failed after retries');\n  }\n\n  async healthCheck(): Promise<boolean> {\n    try {\n      const result = await this.request<{ status: string } | { version: string }>('/health');\n      return 'status' in result || 'version' in result;\n    } catch {\n      return false;\n    }\n  }\n\n  async getProjects(): Promise<ProjectInfo[]> {\n    try {\n      const result = await this.request<{ data: ProjectInfo[] }>('/projects');\n      return result.data || [];\n    } catch {\n      return [];\n    }\n  }\n\n  async getProjectId(): Promise<string | null> {\n    if (this.projectId) {\n      return this.projectId;\n    }\n    \n    const projects = await this.getProjects();\n    if (projects.length > 0) {\n      this.projectId = projects[0].id;\n    }\n    return this.projectId;\n  }\n\n  setProjectId(projectId: string): void {\n    this.projectId = projectId;\n  }\n\n  async getTraces(\n    filter?: TraceFilter,\n    page: number = 1,\n    limit: number = 20\n  ): Promise<PaginatedResponse<Trace>> {\n    const params = new URLSearchParams();\n    params.set('page', String(page));\n    params.set('limit', String(Math.min(limit, 50)));\n\n    if (filter?.fromTimestamp) {\n      params.set('fromTimestamp', filter.fromTimestamp);\n    }\n    if (filter?.toTimestamp) {\n      params.set('toTimestamp', filter.toTimestamp);\n    }\n    if (filter?.name) {\n      params.set('name', filter.name);\n    }\n    if (filter?.userId) {\n      params.set('userId', filter.userId);\n    }\n    if (filter?.sessionId) {\n      params.set('sessionId', filter.sessionId);\n    }\n    if (filter?.tags && filter.tags.length > 0) {\n      filter.tags.forEach(tag => params.append('tags', tag));\n    }\n\n    return this.request<PaginatedResponse<Trace>>(`/traces?${params.toString()}`);\n  }\n\n  async getTrace(traceId: string): Promise<TraceWithObservations> {\n    return this.request<TraceWithObservations>(`/traces/${traceId}`);\n  }\n\n  async getObservations(\n    traceId?: string,\n    page: number = 1,\n    limit: number = 50\n  ): Promise<PaginatedResponse<Observation>> {\n    const params = new URLSearchParams();\n    params.set('page', String(page));\n    params.set('limit', String(Math.min(limit, 100)));\n\n    if (traceId) {\n      params.set('traceId', traceId);\n    }\n\n    return this.request<PaginatedResponse<Observation>>(`/observations?${params.toString()}`);\n  }\n\n  async getObservation(observationId: string): Promise<Observation> {\n    return this.request<Observation>(`/observations/${observationId}`);\n  }\n\n  getTraceUrl(traceId: string): string {\n    const projectPath = this.projectId ? `/project/${this.projectId}` : '';\n    return `${this.baseUrl}${projectPath}/traces/${traceId}`;\n  }\n}\n","import * as vscode from 'vscode';\nimport { LangfuseTreeProvider } from '../views/TreeProvider';\n\nexport function registerFilterCommands(\n  context: vscode.ExtensionContext,\n  treeProvider: LangfuseTreeProvider\n): void {\n  context.subscriptions.push(\n    vscode.commands.registerCommand('langfusecode.searchTraces', async () => {\n      const currentQuery = treeProvider.getSearchQuery();\n      \n      const searchTerm = await vscode.window.showInputBox({\n        prompt: 'Search traces by name',\n        placeHolder: 'Enter trace name to search...',\n        value: currentQuery || ''\n      });\n\n      if (searchTerm === undefined) {\n        return;\n      }\n\n      treeProvider.setSearchQuery(searchTerm || undefined);\n    }),\n\n    vscode.commands.registerCommand('langfusecode.clearFilters', () => {\n      treeProvider.clearSearch();\n      vscode.window.showInformationMessage('Filters cleared');\n    })\n  );\n}\n","import * as vscode from 'vscode';\nimport { ConnectionManager } from '../core/ConnectionManager';\nimport { LangfuseTreeProvider } from '../views/TreeProvider';\nimport { ConnectionFormPanel } from '../panels/ConnectionFormPanel';\nimport { ConnectionItem } from '../views/TreeItems';\n\nexport function registerConnectionCommands(\n  context: vscode.ExtensionContext,\n  connectionManager: ConnectionManager,\n  treeProvider: LangfuseTreeProvider\n): void {\n  context.subscriptions.push(\n    vscode.commands.registerCommand('langfusecode.addConnection', () => {\n      ConnectionFormPanel.show(\n        context.extensionUri,\n        undefined,\n        async (config, secretKey) => {\n          await connectionManager.addConnection(config, secretKey);\n          treeProvider.refresh();\n        }\n      );\n    }),\n\n    vscode.commands.registerCommand('langfusecode.editConnection', (item: ConnectionItem) => {\n      ConnectionFormPanel.show(\n        context.extensionUri,\n        item.config,\n        async (config, secretKey) => {\n          await connectionManager.updateConnection(config, secretKey || undefined);\n          treeProvider.refresh();\n        }\n      );\n    }),\n\n    vscode.commands.registerCommand('langfusecode.deleteConnection', async (item: ConnectionItem) => {\n      const confirm = await vscode.window.showWarningMessage(\n        `Delete connection \"${item.config.name}\"?`,\n        { modal: true },\n        'Delete'\n      );\n      if (confirm === 'Delete') {\n        await connectionManager.removeConnection(item.config.id);\n        treeProvider.refresh();\n      }\n    }),\n\n    vscode.commands.registerCommand('langfusecode.connect', async (item: ConnectionItem) => {\n      try {\n        await connectionManager.connect(item.config.id);\n        treeProvider.refresh();\n      } catch (error) {\n        vscode.window.showErrorMessage(`Failed to connect: ${error instanceof Error ? error.message : 'Unknown error'}`);\n      }\n    }),\n\n    vscode.commands.registerCommand('langfusecode.disconnect', (item: ConnectionItem) => {\n      connectionManager.disconnect(item.config.id);\n      treeProvider.refresh();\n    }),\n\n    vscode.commands.registerCommand('langfusecode.refresh', () => {\n      treeProvider.refresh();\n    })\n  );\n}\n","import * as vscode from 'vscode';\nimport { ConnectionConfig } from '../types';\nimport { ConnectionStorage } from './ConnectionStorage';\nimport { LangfuseClient } from './LangfuseClient';\n\nexport class ConnectionManager {\n  private readonly storage: ConnectionStorage;\n  private readonly clients: Map<string, LangfuseClient> = new Map();\n  private readonly connectedIds: Set<string> = new Set();\n  \n  private readonly _onDidChange = new vscode.EventEmitter<void>();\n  readonly onDidChange = this._onDidChange.event;\n\n  constructor(private readonly context: vscode.ExtensionContext) {\n    this.storage = new ConnectionStorage(context);\n  }\n\n  async initialize(): Promise<void> {\n  }\n\n  getConnections(): ConnectionConfig[] {\n    return this.storage.getConnections();\n  }\n\n  async addConnection(config: ConnectionConfig, secretKey: string): Promise<void> {\n    await this.storage.addConnection(config);\n    await this.storage.setSecretKey(config.id, secretKey);\n    this._onDidChange.fire();\n  }\n\n  async updateConnection(config: ConnectionConfig, secretKey?: string): Promise<void> {\n    await this.storage.updateConnection(config);\n    if (secretKey) {\n      await this.storage.setSecretKey(config.id, secretKey);\n    }\n    \n    if (this.connectedIds.has(config.id)) {\n      await this.disconnect(config.id);\n      await this.connect(config.id);\n    }\n    \n    this._onDidChange.fire();\n  }\n\n  async removeConnection(id: string): Promise<void> {\n    await this.disconnect(id);\n    await this.storage.removeConnection(id);\n    await this.storage.deleteSecretKey(id);\n    this._onDidChange.fire();\n  }\n\n  async connect(connectionId: string): Promise<boolean> {\n    const config = this.getConnections().find(c => c.id === connectionId);\n    if (!config) {\n      vscode.window.showErrorMessage(`Connection not found: ${connectionId}`);\n      return false;\n    }\n\n    const secretKey = await this.storage.getSecretKey(connectionId);\n    if (!secretKey) {\n      vscode.window.showErrorMessage('Secret key not found. Please edit the connection.');\n      return false;\n    }\n\n    return vscode.window.withProgress(\n      {\n        location: vscode.ProgressLocation.Notification,\n        title: `Connecting to ${config.name}...`,\n        cancellable: false,\n      },\n      async () => {\n        try {\n          const client = new LangfuseClient(config.url, config.publicKey, secretKey);\n          const isHealthy = await client.healthCheck();\n\n          if (!isHealthy) {\n            vscode.window.showErrorMessage(`Failed to connect to ${config.name}: Health check failed`);\n            return false;\n          }\n\n          this.clients.set(connectionId, client);\n          this.connectedIds.add(connectionId);\n          this._onDidChange.fire();\n          \n          vscode.window.showInformationMessage(`Connected to ${config.name}`);\n          return true;\n        } catch (error) {\n          const message = error instanceof Error ? error.message : 'Unknown error';\n          vscode.window.showErrorMessage(`Failed to connect to ${config.name}: ${message}`);\n          return false;\n        }\n      }\n    );\n  }\n\n  async disconnect(connectionId: string): Promise<void> {\n    this.clients.delete(connectionId);\n    this.connectedIds.delete(connectionId);\n    this._onDidChange.fire();\n  }\n\n  isConnected(connectionId: string): boolean {\n    return this.connectedIds.has(connectionId);\n  }\n\n  getClient(connectionId: string): LangfuseClient | undefined {\n    return this.clients.get(connectionId);\n  }\n\n  getConnectionConfig(connectionId: string): ConnectionConfig | undefined {\n    return this.getConnections().find(c => c.id === connectionId);\n  }\n\n  cleanup(): void {\n    this.clients.clear();\n    this.connectedIds.clear();\n    this._onDidChange.dispose();\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(265);\n"],"names":["TraceDetailPanel","connectionId","traceId","connectionManager","static","Map","panel","disposables","trace","this","webview","html","getLoadingHtml","onDidDispose","dispose","onDidReceiveMessage","message","handleMessage","loadTrace","show","key","id","existing","panels","get","reveal","vscode","window","createWebviewPanel","name","slice","ViewColumn","One","enableScripts","retainContextWhenHidden","detailPanel","set","client","getClient","getTrace","getHtml","error","getErrorHtml","Error","command","openInBrowser","config","getConnections","find","c","projectId","url","env","openExternal","Uri","parse","observations","traceStart","Date","timestamp","getTime","traceDuration","length","Math","max","map","o","endTime","startTime","toFixed","escapeHtml","renderTreeItem","buildObservationTree","toLocaleString","tags","t","join","renderDetailContent","JSON","stringify","tree","forEach","obs","parentId","parentObservationId","has","push","children","sort","a","b","type","duration","level","depth","isRoot","hasChildren","levelLower","toLowerCase","isError","isWarning","childrenHtml","child","childDuration","min","getTypeIcon","data","renderSection","input","output","metadata","Object","keys","title","renderJsonTree","value","undefined","escaped","Array","isArray","item","i","String","str","replace","delete","d","WINDOW_MS","formatTimeRange","from","to","formatTime","toLocaleTimeString","hour","minute","_onDidChangeTreeData","EventEmitter","onDidChangeTreeData","event","tracesCache","observationsCache","searchQuery","constructor","onDidChange","refresh","clear","fire","setSearchQuery","query","getSearchQuery","clearSearch","getTreeItem","element","getChildren","ConnectionItem","getTraceItems","TraceItem","getObservationItems","ObservationItem","observation","getConnectionItems","configs","MessageItem","isConnected","connect","getProjectId","now","thirtyMinsAgo","traces","getTraces","fromTimestamp","toISOString","toTimestamp","newestTimestamp","oldestTimestamp","hasMore","buildTraceTreeItems","baseUrl","items","sortedTraces","olderEnd","olderStart","LoadOlderItem","loadOlderTraces","fromTime","toTime","withProgress","location","ProgressLocation","Notification","cancellable","async","tracesWithProjectId","oneDayAgo","showErrorMessage","cacheKey","filter","childCount","ConnectionFormPanel","extensionUri","existingConfig","onSave","formPanel","handleSave","handleTest","crypto","randomUUID","publicKey","secretKey","postMessage","LangfuseClient","healthy","healthCheck","success","CONNECTIONS_KEY","context","globalState","saveConnections","connections","update","addConnection","updateConnection","index","findIndex","removeConnection","getSecretKey","secrets","setSecretKey","store","deleteSecretKey","TreeItem","super","TreeItemCollapsibleState","Collapsed","contextValue","iconPath","ThemeIcon","description","URL","host","tooltip","None","date","diffMs","diffMins","floor","diffHours","diffDays","toLocaleDateString","formatTimestamp","lines","userId","sessionId","buildTraceTooltip","arguments","ThemeColor","getObservationIcon","parts","durationMs","ms","model","usage","total","formatObservationDescription","buildObservationTooltip","isToday","toDateString","month","day","icon","ConnectionManager","initialize","treeProvider","LangfuseTreeProvider","treeView","createTreeView","treeDataProvider","showCollapseAll","subscriptions","registerConnectionCommands","registerTraceCommands","registerFilterCommands","commands","registerCommand","cleanup","module","exports","require","authHeader","requestTimeout","retryOptions","maxRetries","baseDelayMs","Buffer","toString","sleep","Promise","resolve","setTimeout","request","endpoint","options","lastError","attempt","delay","pow","controller","AbortController","timeoutId","abort","response","fetch","signal","headers","clearTimeout","status","errorText","text","catch","ok","json","includes","result","getProjects","projects","setProjectId","page","limit","params","URLSearchParams","tag","append","getObservations","getObservation","observationId","getTraceUrl","projectPath","currentQuery","searchTerm","showInputBox","prompt","placeHolder","showInformationMessage","showWarningMessage","modal","disconnect","storage","clients","connectedIds","Set","_onDidChange","ConnectionStorage","add","getConnectionConfig","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call"],"ignoreList":[],"sourceRoot":""}